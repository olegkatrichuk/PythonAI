# Google Analytics 4 Setup Guide

## Настройка GA4 для AI Tools Finder

### 1. Создание GA4 Property

1. Перейдите в [Google Analytics](https://analytics.google.com/)
2. Создайте новый аккаунт или выберите существующий
3. Создайте новое свойство (Property) типа GA4
4. Скопируйте Measurement ID (формат: G-XXXXXXXXXX)

### 2. Настройка переменных окружения

Создайте файл `.env.local` в папке `frontend/` и добавьте:

```bash
# Google Analytics 4
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Site configuration  
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### 3. Отслеживаемые события

Система автоматически отслеживает следующие события:

#### Взаимодействие с инструментами
- **`view_tool`** - Просмотр карточки инструмента
- **`click_tool`** - Клик по кнопке "Перейти на сайт"
- **`add_tool`** - Добавление нового инструмента

#### Поиск и навигация
- **`search`** - Поисковые запросы
- **`view_category`** - Просмотр страниц категорий

#### Пользовательские действия
- **`login`** - Вход в систему
- **`sign_up`** - Регистрация
- **`submit_review`** - Отправка отзыва

#### Внешние переходы
- **`click` (Outbound Link)** - Клики по внешним ссылкам

### 4. Пользовательские измерения (Custom Dimensions)

Настройте в GA4 следующие пользовательские измерения:

1. **custom_dimension_1**: `user_type` (registered/anonymous)
2. **custom_dimension_2**: `user_id` 
3. **custom_dimension_3**: `language` (ru/en/uk)

### 5. Настройка целей и конверсий

Рекомендуемые события для конверсий:
- `click_tool` - Основная цель (переход к инструменту)
- `sign_up` - Регистрация пользователей
- `submit_review` - Вовлеченность пользователей
- `add_tool` - Добавление контента

### 6. Отчеты и дашборды

Создайте пользовательские отчеты для:
- Популярные инструменты по кликам
- Поисковые запросы
- Конверсии по категориям
- Пути пользователей

### 7. Конфиденциальность

Настройки GA4 включают:
- ✅ `anonymize_ip: true` - Анонимизация IP
- ✅ `allow_google_signals: false` - Отключение Google Signals
- ✅ `allow_ad_personalization_signals: false` - Отключение персонализации рекламы

### 8. Проверка работы

1. Запустите сайт в development режиме
2. Откройте GA4 Real-time отчеты
3. Выполните действия на сайте (поиск, клики по инструментам)
4. Убедитесь, что события отображаются в Real-time

### 9. Интеграция с Search Console

Для полной SEO аналитики:
1. Подключите Google Search Console к GA4
2. Настройте связку данных о поиске
3. Отслеживайте organic трафик и ключевые слова

### 10. Мониторинг производительности

События производительности включают:
- `performance_issue` - Проблемы производительности
- `error` - Ошибки JavaScript

Эти данные помогут оптимизировать сайт для лучшего пользовательского опыта.